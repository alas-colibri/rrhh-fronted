
  <h1 class="panel-header text-center">Evaluación Continúa</h1>
  <p-divider></p-divider>
  <!-- <p-paginator
    [rows]="paginator.limit"
    [totalRecords]="paginator.totalItems"
    (onPageChange)="paginate($event)"></p-paginator> -->
  <p-table
    dataKey="id"
    styleClass="p-datatable-gridlines"
    [value]="events"
    [columns]="columns"
    [sortField]="'sort'"
    [loading]="(loaded$|async)!"
    [(selection)]="selectedEvents"
    [responsive]="true">
    <ng-template pTemplate="header" let-columns>
      <tr>
        <th style="width: 3rem">
          <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
        </th>
        <th *ngFor="let col of columns" [pSortableColumn]="col.field">
          {{col.header}}
          <p-sortIcon [field]="col.field"></p-sortIcon>
        </th>
        <th class="text-center">
          <h3>Calificación</h3>
        </th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-rowData let-columns="columns" let-rowIndex="rowIndex">
      <tr [pSelectableRow]="rowData" [pSelectableRowIndex]="rowIndex">
        <td>
          <p-tableCheckbox [value]="rowData"></p-tableCheckbox>
        </td>

        <td *ngFor="let col of columns">

           <!-- Objects
           <div *ngIf="rowData[col.field]?.id" [ngSwitch]="col.field">
            <div *ngSwitchCase="'catalogue'">
              {{rowData[col.field].name}}
            </div>
            <div *ngSwitchCase="'planning'">
              {{rowData[col.field].name}}
            </div>
          </div> -->

          <!--Fields-->
          <div *ngIf="!rowData[col.field]?.id" [ngSwitch]="col.field">
            <div *ngSwitchCase="'active'">
              <p-tag
              [value]="rowData['active']?'Activo':'Inactivo'"
                [pTooltip]="rowData['maxAttempts']===0?'Exceeded the maximum number of attempts allowed':''"
                [severity]="checkState(rowData)"></p-tag>
              </div>
              <div *ngSwitchCase="'endDate'">
                {{rowData[col.field]|date}}
              </div>
              <div *ngSwitchCase="'isEnable'">
                <p-tag [value]="rowData['isEnable']?'disponible':'no disponible'"
                  [pTooltip]="rowData['maxAttempts']===0?'Exceeded the maximum number of attempts allowed':''"
                  [severity]="checkState(rowData)"></p-tag>
              </div>
              <div *ngSwitchDefault>{{rowData[col.field]}}</div>
              </div>
              </td>
               <td class="text-center">
                <div *ngIf="rowData['id']!==authService.auth.id; then thenBlock else elseBlock"></div>
                <ng-template #thenBlock>
                  <form [formGroup]="form" (ngSubmit)="onSubmit()">
                  <div>
                    <label appLabel for="results" label="Nota:" [required]="resultsField"></label>
                    <p-dropdown formControlName="results" [options]="calificacion" optionLabel="name" placeholder="Seleccionar Nota">
                      <ng-template pTemplate="selectedItem">
                        <div *ngIf="resultsField.value">
                          <div>{{resultsField.value.name}}</div>
                        </div>
                      </ng-template>
                      <ng-template pTemplate="item" let-item>
                        {{item.name}}
                      </ng-template>
                    </p-dropdown>
                    <small appErrorMessage [errors]="resultsField.errors" [touched]="resultsField.touched" [dirty]="resultsField.dirty">
                    </small>
                  </div>
                </form>
                </ng-template>
                <ng-template #elseBlock>Current Event</ng-template>
              </td>
      </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage" let-columns>
      <tr>
        <td [attr.colspan]="columns.length">
          {{messageService.paginatorNoRecordsFound}}
        </td>
      </tr>
    </ng-template>
    <ng-template pTemplate="summary">
      <div class="align-items-center">
      <div class="formgrid grid">
        <div class="field xl:col-6 lg:col-6 md:col-6 sm:col-12 ">
          <button pButton pRipple id="btnBack" type="button"
                  label="Cancelar"
                  class="p-button-info p-button-outlined"
                  icon="pi pi-arrow-left"
                  [loading]="(loaded$|async)!"
                  (click)="back()"></button>
        </div>
        <div class="responsive field xl:col-6 lg:col-6 md:col-6 sm:col-12">
          <button pButton pRipple id="submit" type="submit"
                  label="Guardar"
                  icon="pi pi-save"
                  [loading]="(loaded$|async)!"></button>
        </div>
      </div>
    </div>
      <!-- {{messageService.paginatorTotalRegisters(paginator)}} -->
    </ng-template>
  </p-table>
  <!--</p-card>-->
